[[{"l":"Overview"},{"i":"what-is-farswap","l":"What is farswap?","p":["farswap is a decentralized exchange platform with integrated liquidity aggregator built on NEAR blockchain."]},{"i":"just-another-dex-not-were-better","l":"Just another DEX? Not we're better:","p":["There is a key thing to know about farswap:","farswap implements the new combined swap market making model that makes markets more liquid and consequently gives you more profit when you execute the swaps.","Combined swap can","reduce price slippage","reduce fees","provide a very fast trading experience"]},{"l":"Combined Swap","p":["Combined swap can be imagined as order-books working on top of liquidity pools"]},{"i":"why-it-works","l":"Why it works?","p":["farswap order books, built on top of pools, make illiquid pairs liquid by concentrating way more liquidity around the market price. Consequently, trades become more profitable as order books reduce the slippage and the fees. Combined swap is very fast, since we use mathematical models instead of computing values on the blockchain.","Combined swap is better than just a liquidity-pool-based exchange, as we have an additional liquidity in farswap order books, well concentrated around the market price. Also, Combined swap is better than just an order book, since we can use the liquidity of the existing pools along with the liquidity in farswap order books to provide better prices.","example:"]},{"l":"Implementation","p":["When swapping, one part of assets is being swapped in the order book and another is in liquidity pool."]},{"l":"Pool rate","p":["Which part of tokens is swapped in pool? It is always different. In next paragraphs we will call it\"pool rate\".","pool_rate = volume_to_swap_in_pool / total_volume_of_swap","It depends on the total number of assets presented for the pair in both liquidity pool and order book. In order to choose the best pool rate, we will use a predictive models based on our researches."]},{"i":"why-do-we-need-it","l":"Why do we need it?","p":["Most DEX platforms use two models of exchange: automated market maker (AMM) and order book. Both models have some disadvantages","Illiquid market makes traders have difficulty in finding matching orders due to large bid-ask spread and low trading volumes. If you want to have successful orders, you have to make sure that your highest bid is lower than the lowest ask.","AMM causes high slippage for large orders: Slippage relies on the liquidity pool’s size of a certain trading pair. The liquidity pool needs to be 100x greater than the size of the order to keep the slippage rate under 1%","These problems cause a liquidity lack on the market. At farswap we believe that with the combined swap, even shitcoins will be liquid."]}],[{"l":"Research","p":["$B reserves ≈ 215K, $A reserves ≈ 26M","As you can see, starting from 10'000 $A swapping, these charts all look like y = k/x^ n. This allows us to say that depending on liquidity in pool and order book, we will be able to predict the percentage of tokens we swap in pool due to mathematical model. In this case pool ratio calculation will have O(1)complexity.","As you could see previously, on all the ratio/swap amount curves we can apply a power trendline y = k/x^ n like here:","As you see, when we use combined swap, at one moment we reach a better price compared to order book and pool. Now let's talk about algorithms behind these simulations and how they could work in production.","combined swap","combined swap: we have pool reserves $A=M/2 and $B=N/2, and we use the same order book, but each $B amount is divided by 2","Depending on reserves in pool and order book data, the best ratio curve can take these forms.","For all the simulations we used a very simple python script that iterates trough all possible ratios and chooses the one who gives us the best $B amount out.","from order book only","from order book only: we use Binance's 98K limit sell orders when in total people sell N $B starting with token price = M/N","from pool only","from pool only: we have pool reserves $A=M and $B=N","Here is the chart explaining the price formation.","How do our pool works? Exactly the same as on Uniswap V2","Liquidity parameters in simulations:","Our goal is providing the best price by using combined swap. To prove the utility of these swaps, we present you our simulations of market price formation when buying in three different ways:","To make this very beautiful chart we had to simulate the one-moment abstract market state. On this market we have the total amount of $B = N and $A = M and 0.3% transaction fee. How did we estimate N and M constants? Easily, this data was downloaded and parsed from Binance, so once we reach their turnover, we know how to deal with it.","X-axis: total $A we are swapping.","Y-axis: percentage of $B we buy from pool","You can see that this algorithm is not efficient at all O(n) complexity and too much memory usage. However, in production we can avoid using it. How?"]}],[{"l":"Project History"},{"i":"feb-2022---march-2022","l":"Feb 2022 - March 2022","p":["farswap is born during the hackathon organized by NEAR protocol and Encode Club educational community in February/March 2022. We ended-up with a runner-up prize of $1500","You can see our first pitch here"]},{"i":"september-2022---november-2022","l":"September 2022 - November 2022","p":["We have joined NEAR x Encode Club accelerator program and successfully completed it by November ending with a pitch day"]}]]